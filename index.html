<!DOCTYPE html>
<html>

<head>
    <title>ChatGPTä½™é¢æŸ¥è¯¢ OpenAI midjourney è´¦å·è´­ä¹°å……å€¼</title>
    <meta name="description" content='åœ¨çº¿ChatGPTä½™é¢æŸ¥è¯¢ OpenAI midjourney è´¦å·è´­ä¹°å……å€¼ï¼Œå…ç™»å½•'>
    <meta name="keywords" content="openai,chatgpt,midjourney,gpt,gpt4,key,è´¦å·,å……å€¼,è´­ä¹°,æŸ¥è¯¢,ä½™é¢,æŸ¥ä½™é¢,é¢åº¦">
    <meta name="anthor" content="lonlie,wx:lonliecom">
    <meta name="robots" content="openai,chatgpt,midjourney,gpt,gpt4,key,è´¦å·,å……å€¼,è´­ä¹°,æŸ¥è¯¢,ä½™é¢,æŸ¥ä½™é¢,é¢åº¦">
    <meta charset="UTF-8">
    <style>
        #query {
            background-color: #f2f2f2;
            padding: 20px;
            text-align: center;
        }

        #query h1 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        #query input[type=text],
        input[type=date] {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #f2f2f2;
            border-radius: 5px;
            margin-right: 10px;
        }

        #query input[type=text]:focus-visible,
        input[type=date]:focus-visible,
        :focus {
            outline: none;
            border: 1px solid #4CAF50;
        }

        #query #key {
            width: 480px;
        }

        #query button {
            padding: 10px 35px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            position: relative;
        }

        #query button:hover {
            background-color: #3e8e41;
        }

        #query button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #query button.loading:before {
            content: '';
            position: absolute;
            left: 18%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid #fff;
            border-top-color: rgba(255, 103, 104, 1);
            animation: loading 1s ease-in-out infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        #query table {
            width: 70%;
            margin: 0 auto;
            border-collapse: collapse;
            border: 1px solid #ddd;
            margin-top: 10px;
            animation: fadeIn 1s ease-in-out;
        }

        #query th,
        #query td {
            padding: 4px;
            border: 1px solid #ddd;
        }

        #query th {
            background-color: #e8e8e8;
            font-size: 15px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }

        .item {
            width: 140px;
            height: 50px;
            margin: 10px;
            padding: 10px;
            text-align: center;
            box-shadow: 2px 2px 5px #888888;
            transition: all 0.5s ease;
        }

        .item:hover {
            transform: scale(1.1);
        }

        .item-title {
            font-weight: bold;
            font-size: 12px;
            margin: 5px 0 10px 0;
        }

        .item-value {
            font-size: 16px;
            color: #4CAF50;
            font-weight: bold;
        }

        .query-btn {
            display: block;
            margin: 20px auto;
            width: 100px;
            height: 50px;
            border: none;
            background-color: #4CAF50;
            color: #fff;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.5s ease;
        }

        .query-btn:hover {
            background-color: #3e8e41;
        }

        @keyframes loading {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        #products {
            margin-top: 20px;
            text-align: center;
        }

        #products table {
            width: 65%;
            margin: 0 auto;
            border-collapse: collapse;
            border: 1px solid #ddd;
            margin-bottom: 100px;
        }

        #products .logo {
            width: 50px;
            height: 50px;
            vertical-align: inherit;
            margin-right: 5px;
        }

        #products th,
        #products td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        #products tr:hover {
            background-color: #f5f5f5;
        }

        #products td:nth-child(1) {
            text-align: left;
            padding-left: 30px;
        }

        #products td:nth-child(2) span::before {
            content: "Â¥";
        }

        #products td:nth-child(2) {
            color: red;
            font-weight: bold;
        }

        #products th {
            background-color: #f2f2f2;
            font-size: 18px;
        }

        #products ul {
            padding: 0;
            padding-left: 20px;
            text-align: left;
            margin: 0;
        }

        #products .import {
            color: red;
        }

        #customer-service {
            position: fixed;
            right: 20px;
            top: 220px;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            text-align: center;
            background: white;
        }

        #customer-service img {
            width: 200px;
            height: 200px;
        }

        #customer-service p {
            font-size: 16px;
            margin-bottom: 10px;
        }

        #close-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 20px;
            color: #aaa;
            cursor: pointer;
        }

        #close-btn:hover {
            color: #666;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
        }

        .alert {
            width: 40%;
            margin: 0 auto;
            text-align: left;
            margin-bottom: 20px;
            background-color: #FFF8DC;
            color: #333333;
            border: 2px solid #F44336;
            border-radius: 10px;
            padding: 0 10px 0 10px;
            animation: shake 0.5s;
            margin-bottom: 20px;
        }

        @keyframes shake {
            0% {
                transform: translateX(0);
            }

            10%,
            90% {
                transform: translateX(-10px);
            }

            30%,
            70% {
                transform: translateX(10px);
            }

            50% {
                transform: translateX(0);
            }
        }

        .message {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            color: #333;
            padding: 10px;
            border: 1px solid #F44336;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            background: white;
        }

        td h2 {
            font-size: medium;
            display: inline;
            font-weight: normal;
        }
    </style>
</head>

<body>
    <div id="query">
        <form onsubmit="event.preventDefault(); queryBalance();">
            <h2>ğŸ’°ChatGPT OpenAI key è´¦å·ä½™é¢æŸ¥è¯¢</h2>
            <input type="text" name="key" id="key" placeholder="è¯·è¾“å…¥OpenAI API keyï¼šsk-xxxæˆ–ä¼šè¯å¯†é’¥sess-xxx" autofocus="true">
            <input type="text" name="publicId" id="publicId" placeholder="ç”¨æˆ·IDï¼ˆå¯ç©ºï¼‰ï¼šuser-xxx"
                title="ç”¨æˆ·å…¬å…±IDï¼ˆå¯ç©ºï¼‰ï¼šuser-xxx">
            <input type="date" name="specificDate" id="specificDate" title="æŒ‡å®šæŸ¥è¯¢æ—¥æœŸï¼ˆå¯ç©ºï¼‰">
            <button type="submit" id="btn_submit">æŸ¥è¯¢ä½™é¢</button>
            <p id="searchTips" style="font-size: 11px;"></p>
            <div class="container" id="summary">
                <div class="item">
                    <div class="item-title">å‰©ä½™é¢åº¦</div>
                    <div id="remaining-amount" class="item-value">-</div>
                </div>
                <div class="item">
                    <div class="item-title">æ€»é¢åº¦</div>
                    <div id="total-amount" class="item-value">-</div>
                </div>
                <div class="item">
                    <div class="item-title">å·²ç”¨é¢åº¦</div>
                    <div id="used-amount" class="item-value">-</div>
                </div>
                <div class="item">
                    <div class="item-title">æ˜¯å¦ç»‘å¡</div>
                    <div id="is-bound" class="item-value">-</div>
                </div>
                <div class="item">
                    <div class="item-title">keyåˆ°æœŸæ—¶é—´</div>
                    <div id="key-expiration" class="item-value">-</div>
                </div>
            </div>
        </form>
    </div>

    <div id="products">
        <div class="alert">
            <p style="font-weight: bold;">âš ï¸âš ï¸âš ï¸ä½¿ç”¨ChatGPTçš„é‡è¦æé†’ï¼š</p>
            <p>
                éœ€è¦ä½¿ç”¨ä»£ç†ï¼ˆå°½é‡ç”¨ç¾å›½èŠ‚ç‚¹ï¼‰ï¼ŒåŒæ—¶å»ºè®®å¯ç”¨æµè§ˆå™¨çš„æ— ç—•æ¨¡å¼è®¿é—®ChatGPTã€‚APIä¹Ÿéœ€è¦ä»£ç†ï¼Œä¸è¦åœ¨é¦™æ¸¯æœåŠ¡å™¨è°ƒç”¨ï¼Œå¦åˆ™å°å·ã€‚
            </p>
        </div>
        <h2>ğŸ”¥åœ¨å”®å•†å“ï¼šChatGPT OpenAIã€Midjourneyè´¦å·åŠå……å€¼
            <br>
            åŠ å³ä¾§å¾®ä¿¡ï¼ˆ<span class="import">lonliecom</span>ï¼‰ï¼Œå’¨è¯¢ä»£ç†åˆä½œé”€å”®ã€è´­ä¹°ï¼
        </h2>
        <table>
            <tr>
                <th colspan="3">æ›´æ–°æ—¥æœŸï¼š<span class="import">2023-12-04</span></th>
            </tr>
            <tr>
                <th>å•†å“</th>
                <th>ä»·æ ¼</th>
                <th>è¯´æ˜</th>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>ã€æ¨èã€‘ç¨³å®šè½¬å‘ GPT4 API Keyé¢åº¦</h2>
                </td>
                <td>
                    <span>110ï¼ˆ$50é¢åº¦ï¼‰</span><br>
                    <span></span>1000ï¼ˆ$500é¢åº¦ï¼‰</span>
                </td>
                <td>
                    <ul>
                        <li>
                            $50-$499é¢åº¦ï¼Œä»·æ ¼æ¯”ä¾‹1:2.2ï¼ˆ$1å”®ä»·2.2å…ƒï¼‰<br>
                            $500ä»¥ä¸Šé¢åº¦ï¼Œä»·æ ¼æ¯”ä¾‹1:2ï¼ˆ$1å”®ä»·2å…ƒï¼‰<br>
                        </li>
                        <li>
                            $50é¢åº¦èµ·è´­
                        </li>
                        <li>
                            <span class="import">æ”¯æŒgpt3.5ã€gpt4ã€gpt4 turboã€gpt4 visionã€ttsã€dalleç­‰</span>
                        </li>
                        <li>
                            æä¾›keyï¼Œå¯ä»¥è‡ªåŠ©æŸ¥ä½™é¢åŠæ˜ç»†
                        </li>
                        <li>
                            åå°ä½¿ç”¨å®˜æ–¹keyè½¬å‘ï¼Œç¨³å®šå¯é ï¼Œä¸€åˆ†é’Ÿå¤§æ¦‚60-100æ¬¡å¯ä»¥æ»¡è¶³
                        </li>
                        <li>
                            <span class="import">é¢åº¦90å¤©æœ‰æ•ˆæœŸï¼Œæ— å°å·é—®é¢˜</span>
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>å°é¢ç›´è¿ GPT4 API Keyé¢åº¦</h2>
                </td>
                <td>
                    <span>540ï¼ˆ$120ç‹¬äº«é¢åº¦ï¼‰</span><br>
                    <span>1740ï¼ˆ$600å…±äº«é¢åº¦ï¼‰</span><br>
                    <span>2100ï¼ˆ$600ç‹¬äº«é¢åº¦ï¼‰</span>
                </td>
                <td>
                    <ul>
                        <li>
                            $120ç‹¬äº«è´¦å·é¢åº¦ï¼Œä»·æ ¼æ¯”ä¾‹1:4.5ï¼ˆ$1å”®ä»·4.5å…ƒï¼‰<br>
                            $600å…±äº«è´¦å·é¢åº¦ï¼Œä»·æ ¼æ¯”ä¾‹1:2.9ï¼ˆ$1å”®ä»·2.9å…ƒï¼‰<br>
                            å…±äº«å¤§å·é¢åº¦ï¼Œé€Ÿåº¦å¿«ï¼Œè¶³é‡é¢åº¦ï¼Œå¯è‡ªåŠ©æŸ¥è¯¢ç”¨é‡<br>
                            $600ç‹¬äº«è´¦å·é¢åº¦ï¼Œä»·æ ¼æ¯”ä¾‹1:3.5ï¼ˆ$1å”®ä»·3.5å…ƒï¼‰<br>
                        </li>
                        <li>
                            <span class="import">æ”¯æŒgpt3.5ã€gpt4ã€gpt4 turboã€gpt4 visionã€ttsã€dalleç­‰</span>
                        </li>
                        <li>
                            æä¾›keyï¼Œå¯ä»¥ä»£æŸ¥ä½™é¢æˆ–æä¾›readerè´¦å·
                        </li>
                        <li>
                            <span class="import">é¢åº¦å½“æœˆæœ‰æ•ˆï¼Œ100%å”®åä¿éšœï¼Œå°å·è¡¥é¢åº¦</span>
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>å¤§é¢ç›´è¿ç‹¬äº« GPT4 API Keyé¢åº¦</h2>
                </td>
                <td>
                    <span>2800ï¼ˆ$1000é¢åº¦ï¼‰</span><br>
                    <span>11500ï¼ˆ$5000é¢åº¦ï¼‰</span>
                </td>
                <td>
                    <ul>
                        <li>
                            $1000-$4999ç‹¬äº«è´¦å·é¢åº¦<br>
                            ä»·æ ¼æ¯”ä¾‹1:2.8ï¼ˆ$1å”®ä»·2.8å…ƒï¼‰<br>
                            $5000ç‹¬äº«è´¦å·é¢åº¦ï¼Œä»·æ ¼æ¯”ä¾‹1:2.3ï¼ˆ$1å”®ä»·2.3å…ƒï¼‰<br>
                        </li>
                        <li>
                            æœ‰1000 2500 5000 1w 1.5w 2w 3w 5w 10w 15w<br>å¤šç§è§„æ ¼ç‹¬äº«é¢åº¦
                        </li>
                        <li>
                            <span class="import">æ”¯æŒgpt3.5ã€gpt4ã€gpt4 turboã€gpt4 visionã€ttsã€dalleç­‰</span>
                        </li>
                        <li>
                            æä¾›keyï¼Œå¯ä»¥ä»£æŸ¥ä½™é¢æˆ–æä¾›readerè´¦å·
                        </li>
                        <li>
                            <span class="import">é¢åº¦å½“æœˆæœ‰æ•ˆï¼Œ100%å”®åä¿éšœï¼Œå°å·è¡¥é¢åº¦</span>
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>OpenAIä»£ä»˜è´¦å•ã€å……å€¼</h2>
                </td>
                <td>
                    <span>425ï¼ˆ$50ï¼‰</span>
                </td>
                <td>
                    <ul>
                        <li>
                            $500ä»¥å†…æ±‡ç‡1:8.5<br>
                            $500ä»¥ä¸Šæ±‡ç‡1:8<br>
                        </li>
                        <li>
                            $50èµ·ä»˜
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>ChatGPT 5æ™®é€šè´¦å· 3.5</h2>
                </td>
                <td><span>15</span></td>
                <td>
                    <ul>
                        <li>
                            æä¾›è´¦å·ã€å¯†ç <span class="import">ï¼ˆéƒ¨åˆ†è´¦å·æ”¯æŒä¿®æ”¹å¯†ç ï¼‰</span>
                        </li>
                        <li>
                            è´¦å·åˆå§‹ä½™é¢<span class="import">$5</span>
                        </li>
                        <li>
                            APIé¢‘ç‡é™åˆ¶ï¼š<br>
                            æ¯åˆ†é’Ÿ3æ¬¡è¯·æ±‚ï¼Œæ¯åˆ†é’Ÿ40000 tokensï¼Œæ¯å¤©200æ¬¡è¯·æ±‚
                        </li>
                        <li>
                            å”®å24å°æ—¶
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>ChatGPT Pluså…±äº«è´¦å· 4.0</h2>
                </td>
                <td><span>60/æœˆ</span></td>
                <td>
                    <ul>
                        <li>
                            æä¾›è´¦å·ã€å¯†ç <span class="import">ï¼ˆéƒ¨åˆ†è´¦å·æ”¯æŒä¿®æ”¹å¯†ç ï¼‰</span>
                        </li>
                        <li>
                            <span class="import">æŒ‰æœˆç»­è´¹</span>ï¼Œå¯ä»¥åªä½¿ç”¨ä¸€ä¸ªæœˆ
                        </li>
                        <li>
                            å¯ä»¥ä½¿ç”¨GPT4ï¼Œç›®å‰é™åˆ¶æ¯3å°æ—¶æé—®40æ¬¡
                        </li>
                        <li>
                            åŒ…å”®å30å¤©ï¼Œå°å·æ‰çº¿æŒ‰å¤©é€€æ¬¾ï¼ˆæœªæŒ‰é‡è¦æç¤ºä½¿ç”¨ï¼Œä¸åŒ…å”®åï¼‰
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>ChatGPT Plusç‹¬äº«è´¦å· 4.0</h2>
                </td>
                <td><span>200/æœˆ</span></td>
                <td>
                    <ul>
                        <li>
                            æä¾›è´¦å·ã€å¯†ç <span class="import">ï¼ˆéƒ¨åˆ†è´¦å·æ”¯æŒä¿®æ”¹å¯†ç ï¼‰</span>
                        </li>
                        <li>
                            <span class="import">æŒ‰æœˆç»­è´¹</span>ï¼Œå¯ä»¥åªä½¿ç”¨ä¸€ä¸ªæœˆ
                        </li>
                        <li>
                            å¯ä»¥ä½¿ç”¨GPT4ï¼Œç›®å‰é™åˆ¶æ¯3å°æ—¶æé—®40æ¬¡
                        </li>
                        <li>
                            åŒ…å”®å30å¤©ï¼Œå°å·æ‰çº¿æŒ‰å¤©é€€æ¬¾ï¼ˆæœªæŒ‰é‡è¦æç¤ºä½¿ç”¨ï¼Œä¸åŒ…å”®åï¼‰
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>OpenAI API ä¸­è½¬é€šé“</h2>
                </td>
                <td>
                    <span>150/æœˆ</span><br>
                    <span>1500/å¹´</span>
                </td>
                <td>
                    <ul>
                        <li>
                            æä¾›OpenAI APIä¸­è½¬é€šé“ï¼Œæ›¿ä»£https://api.openai.com
                        </li>
                        <li>
                            <span class="import">æ”¯æŒå›½å†…æœåŠ¡å™¨ç›´æ¥è°ƒç”¨OpenAIæ¥å£ï¼Œæ— éœ€é¢å¤–ä»£ç†</span>
                        </li>
                        <li>
                            æ”¯æŒæµå¼è¾“å‡º
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>AIæ™ºèƒ½åŸåˆ›æ–‡ç« å†™ä½œSEOæ‰¹é‡ç”Ÿæˆå™¨</h2>
                </td>
                <td><span>0.05/ç¯‡</span></td>
                <td>
                    <ul>
                        <li>
                            <a href="http://gen.zsxx.ren/"><span class="import">http://gen.zsxx.ren/</span></a>
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/chatgpt.png" class="logo">
                    <h2>GPTå¯¹è¯æœºå™¨äººæ•´å¥—ç¨‹åº</h2>
                </td>
                <td><span>3000</span></td>
                <td>
                    <ul>
                        <li>
                            <a href="http://chatgpt.firstui.cn/"><span
                                    class="import">http://chatgpt.firstui.cn/</span></a>
                        </li>
                        <li>
                            ä¼šå‘˜ä½“ç³»ã€æ”¯ä»˜ã€ä»£ç†
                        </li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td><img src="assets/midjourney.png" class="logo">
                    <h2>Midjourney 30/60è´¦å·</h2>
                </td>
                <td><span>260/485</span></td>
                <td>
                    <ul>
                        <li>
                            æä¾›è´¦å·ã€å¯†ç 
                        </li>
                    </ul>
                </td>
            </tr>
        </table>
    </div>

    <div id="customer-service">
        <span id="close-btn" onclick="closeCustomerService()">&times;</span>
        <img src="assets/wx.png" alt="åœ¨çº¿å¾®ä¿¡å®¢æœ">
        <p>ğŸ¤æ¬¢è¿å’¨è¯¢ã€åˆä½œã€äº¤æµğŸ¤</p>
    </div>

    <div class="message"></div>

    <script>
        document.getElementById("searchTips").innerHTML = "ç”¨é‡æ•°æ®æŒ‰æ—¥æœŸæŸ¥è¯¢åæ±‡æ€»ï¼Œç›®å‰å®˜æ–¹å¯¹å•ä¸ªkeyæŸ¥è¯¢è¯·æ±‚é™åˆ¶ä¸º5æ¬¡/åˆ†é’Ÿï¼Œä»Šæ—¥æŸ¥è¯¢å½“æœˆæ€»ç”¨é‡é¢„è®¡éœ€è¦<span style='color: chocolate;font-weight: bold;'>" + (Math.ceil(new Date().getDate() / 5) - 1) + "</span>åˆ†é’Ÿ";

        function queryBalance(event) {
            var key = document.getElementById("key").value;
            var publicId = document.getElementById("publicId").value;
            var specificDate = document.getElementById("specificDate").value;

            if (!(/(^sk-[a-zA-Z0-9]{48}$)|(^sess-[a-zA-Z0-9]{40}$)/.test(key))) {
                showMessage("è¾“å…¥çš„keyæœ‰è¯¯ï¼", 0);
                return;
            }

            if (publicId.trim() != "" && !(/(^user-[a-zA-Z0-9]{24}$)/.test(publicId))) {
                showMessage("è¾“å…¥çš„ç”¨æˆ·å…¬å…±IDæœ‰è¯¯ï¼", 0);
                return;
            }

            var btn = document.getElementById("btn_submit");
            btn.classList.add('loading');
            btn.disabled = true;
            var remainingAmount = document.getElementById('remaining-amount');
            var totalAmount = document.getElementById('total-amount');
            var usedAmount = document.getElementById('used-amount');
            var isBound = document.getElementById('is-bound');
            var keyExpiration = document.getElementById('key-expiration');
            var queryBtn = document.getElementById('query-btn');

            remainingAmount.innerHTML = "-";
            totalAmount.innerHTML = "-";
            usedAmount.innerHTML = "-";
            isBound.innerHTML = "-";
            keyExpiration.innerHTML = "-";

            var oldTable = document.getElementById('detailTable');
            if (oldTable != null) {
                oldTable.remove();
            }

            if (key.startsWith("sees-") || specificDate.trim() != "") {
                ajax({
                    method: 'GET',
                    url: 'https://api.yourdomain.com/api/main/bill?key=' + key + '&ext=1652831557593' + '&publicId=' + publicId + '&beginDate=' + specificDate + '&endDate=' + specificDate
                }).then(function (response) {
                    var data = JSON.parse(response).data;
                    var result = data.returnObject;
                    if (data.isPass) {
                        if (key.startsWith("sees-")) {
                            remainingAmount.innerHTML = "$" + result.remaining.toFixed(7);
                            totalAmount.innerHTML = "$" + result.total.toFixed(7);
                            usedAmount.innerHTML = "$" + result.usage.toFixed(7);
                            isBound.innerHTML = result.bind ? "æ˜¯" : "å¦";
                            keyExpiration.innerHTML = (new Date(result.util * 1000)).toLocaleString();
                        } else {
                            usedAmount.innerHTML = "$" + result.usage.toFixed(7);
                        }
                    } else {
                        showMessage(data.desc, 1);
                    }
                }).catch(function (error) {
                    showMessage("æŸ¥è¯¢å¤±è´¥ï¼ï¼", 1);
                }).finally(function () {
                    btn.classList.remove('loading');
                    btn.disabled = false;
                });
            } else {
                var dateArray = generateDateArray();
                let index = 0;
                var usageDetail = [];

                var queryCore = function () {
                    const item = dateArray[index];
                    ajax({
                        method: 'GET',
                        url: 'https://api.yourdomain.com/api/main/bill?key=' + key + '&ext=1652831557593' + '&publicId=' + publicId + '&beginDate=' + item[0].toLocaleString() + '&endDate=' + item[1].toLocaleString()
                    }).then(function (response) {
                        var data = JSON.parse(response).data;
                        var result = data.returnObject;

                        if (data.isPass) {
                            usageDetail.push(...result.detail);
                            showUsageDetail(usageDetail, index === dateArray.length);
                        } else {
                            showMessage(data.desc, 1);
                        }
                    }).catch(function (error) {
                        showMessage("æŸ¥è¯¢å¤±è´¥ï¼ï¼", 1);
                    });

                    index++;
                    if (index === dateArray.length) {
                        clearInterval(queryInterval);

                        btn.classList.remove('loading');
                        btn.disabled = false;
                    }
                };

                queryCore();
                const queryInterval = setInterval(queryCore, 60000);
            }
        }
        
        function showUsageDetail(usageDetail, end) {
            var oldTable = document.getElementById('detailTable');
            if (oldTable != null) {
                oldTable.remove();
            }

            const models = [...new Set(usageDetail.flatMap(i => i.data.map(entry => entry.model)))].sort();

            const modelTotals = models.reduce((acc, model) => {
                acc[model] = 0;
                return acc;
            }, {});

            const table = document.createElement('table');
            table.setAttribute("id", "detailTable");
            const thead = document.createElement('thead');
            const tbody = document.createElement('tbody');
            table.appendChild(thead);
            table.appendChild(tbody);

            const headerRow = document.createElement('tr');
            const dateHeader = document.createElement('th');
            dateHeader.textContent = 'æ—¥æœŸ';
            headerRow.appendChild(dateHeader);
            models.forEach(model => {
                const modelHeader = document.createElement('th');
                modelHeader.textContent = model;
                headerRow.appendChild(modelHeader);
            });
            const subtotalHeader = document.createElement('th');
            subtotalHeader.textContent = 'åˆè®¡';
            headerRow.appendChild(subtotalHeader);
            thead.appendChild(headerRow);

            usageDetail.forEach(i => {
                const row = document.createElement('tr');
                const dateCell = document.createElement('td');
                dateCell.textContent = i.date;
                row.appendChild(dateCell);

                let subtotal = 0;
                models.forEach(model => {
                    const modelCell = document.createElement('td');
                    const modelData = i.data.find(entry => entry.model === model);
                    const amount = modelData ? modelData.amount : 0;
                    modelCell.textContent = amount.toFixed(2);
                    row.appendChild(modelCell);
                    subtotal += amount;
                    modelTotals[model] += amount;
                });
                const subtotalCell = document.createElement('td');
                subtotalCell.textContent = subtotal.toFixed(2);
                row.appendChild(subtotalCell);

                tbody.appendChild(row);
            });

            const summaryRow = document.createElement('tr');
            const summaryDateCell = document.createElement('td');
            summaryDateCell.textContent = 'æ±‡æ€»';
            summaryRow.appendChild(summaryDateCell);

            let grandTotal = 0;
            models.forEach(model => {
                const summaryModelCell = document.createElement('td');
                summaryModelCell.textContent = modelTotals[model].toFixed(2);
                summaryRow.appendChild(summaryModelCell);
                grandTotal += modelTotals[model];
            });

            const grandTotalCell = document.createElement('td');
            grandTotalCell.textContent = grandTotal.toFixed(2);
            summaryRow.appendChild(grandTotalCell);
            if (end) {
                document.getElementById('used-amount').innerHTML = "$" + grandTotal.toFixed(2);
            }

            tbody.insertBefore(summaryRow, tbody.firstChild);

            document.getElementById("summary").appendChild(table);
        }

        function generateDateArray() {
            const ranges = [];
            const currentDate = new Date();
            const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);

            let startDate = startOfMonth;
            let endDate = new Date(startOfMonth);

            while (startDate < currentDate) {
                endDate = new Date(startDate);
                endDate.setDate(startDate.getDate() + 4);

                if (endDate > currentDate) {
                    endDate = currentDate;
                }

                ranges.push([
                    startDate,
                    endDate
                ]);

                startDate = new Date(endDate);
                startDate.setDate(endDate.getDate() + 1);
            }

            return ranges;
        }

        function showMessage(msg, type) {
            var message = document.querySelector('.message');
            message.innerHTML = (type == 0 ? "âš ï¸âš ï¸âš ï¸" : "ğŸš¨ğŸš¨ğŸš¨") + msg;
            message.style.opacity = 1;
            setTimeout(function () {
                message.style.opacity = 0;
            }, 3000);
        }

        function closeCustomerService() {
            document.getElementById("customer-service").style.display = "none";
        }

        function ajax(options) {
            return new Promise(function (resolve, reject) {
                var xhr = new XMLHttpRequest();
                xhr.open(options.method || 'GET', options.url);
                xhr.onload = function () {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        resolve(xhr.response);
                    } else {
                        reject(new Error(xhr.statusText));
                    }
                };
                xhr.onerror = function () {
                    reject(new Error('Network Error'));
                };
                xhr.send(options.data);
                xhr.finally = function (callback) {
                    xhr.onload = function () {
                        callback();
                    };
                    xhr.onerror = function () {
                        callback();
                    };
                };
            });
        }

    </script>
</body>

</html>
